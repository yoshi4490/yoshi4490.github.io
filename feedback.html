<!doctype html><html lang="ja"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>フィードバック｜経理ラボベース</title>
<link rel="icon" href="assets/logo.svg" type="image/svg+xml">
<style>
:root{--ink:#0f172a;--muted:#64748b;--bg:#f6fbff;--panel:#fff;--border:#e2e8f0;--brand:#12b4a6;--shadow:0 10px 30px rgba(17,24,39,.08)}
*{box-sizing:border-box}body{margin:0;font-family:system-ui,'Noto Sans JP',sans-serif;background:linear-gradient(180deg,#f6fbff 0%,#fbfeff 100%);color:var(--ink)}
.wrap{max-width:640px;margin:30px auto;padding:18px}
.card{background:var(--panel);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:16px}
label{display:block;font-size:12px;color:#334155;margin-bottom:6px}
input,select,textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#fff}
.btn{padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:#12b4a6;color:#fff;cursor:pointer;margin-top:10px}
.small{font-size:12px;color:var(--muted)}
</style></head><body>
<div class="wrap">
  <div class="card">
    <h2 style="margin:6px 0 10px;">フィードバック</h2>
    <p class="small">バグ報告・改善要望などをお送りください。ログインしていなくても投稿できます。</p>
    <label>カテゴリ</label>
    <select id="category">
      <option>バグ報告</option><option>コンテンツ要望</option><option>UI/UX</option><option>その他</option>
    </select>
    <label style="margin-top:8px;">内容</label>
    <textarea id="message" rows="6" placeholder="例：Day3の解説で金額が違うかも…"></textarea>
    <button class="btn" id="send">送信</button>
    <div id="msg" class="small" style="margin-top:8px;"></div>
  </div>
</div>
<script type="module">
import { supa, submitFeedback } from './supa.js';
const $=id=>document.getElementById(id);
$('send').onclick=async()=>{
  const category=$('category').value, message=$('message').value.trim();
  if(!message){ $('msg').textContent='内容を入力してください'; return; }
  if(!supa){ // Fallback: メール起動
    location.href='mailto:you@example.com?subject='+encodeURIComponent('経理ラボベース フィードバック')+'&body='+encodeURIComponent(message);
    return;
  }
  $('msg').textContent='送信中…';
  try{
    await submitFeedback({ category, message });
    $('msg').textContent='ありがとうございました！';
    $('message').value='';
  }catch(e){
    console.warn(e);
    $('msg').textContent='送信に失敗しました。後ほどお試しください。';
  }
};
</script>
</body></html>

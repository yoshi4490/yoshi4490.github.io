<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>経理実務シミュレーター - Freee風スタイル</title>
  <style>
    :root{
      --ink:#0f172a;
      --muted:#64748b;
      --bg:#f6f9fb;
      --panel:#ffffff;
      --border:#e2e8f0;
      --brand:#12b4a6;      /* アクア系（freee風の爽やかトーン） */
      --brand-ink:#0a5e57;
      --brand-weak:#e6f7f5;
      --accent:#2563eb;
      --danger:#dc2626;
      --ok:#059669;
      --shadow: 0 8px 20px rgba(2, 80, 70, .06);
      --radius: 14px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,'Noto Sans JP','Hiragino Kaku Gothic ProN','Yu Gothic',Meiryo,sans-serif;
      color:var(--ink);
      background: var(--bg);
    }
    .layout{ display:grid; grid-template-columns: 260px 1fr; grid-template-rows: 64px 1fr; height:100%; }
    .topbar{
      grid-column: 1 / span 2;
      height:64px; background:var(--panel); border-bottom:1px solid var(--border);
      display:flex; align-items:center; justify-content:space-between; padding:0 18px;
      position:sticky; top:0; z-index:5;
    }
    .brand{ display:flex; align-items:center; gap:10px; font-weight:700; }
    .logo{
      width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg, var(--brand), #7de3d7);
      box-shadow: var(--shadow);
    }
    .top-actions{ display:flex; gap:8px; align-items:center; }
    .btn{
      border:1px solid var(--border); background:white; padding:8px 12px; border-radius:12px; cursor:pointer; font-size:13px;
    }
    .btn.primary{ background:var(--brand); border-color:transparent; color:white; }
    .btn.ghost{ background:white; }
    .search{ display:flex; align-items:center; gap:8px; background:#f1f5f9; border:1px solid var(--border); padding:8px 10px; border-radius:12px; }
    .search input{ border:none; outline:none; background:transparent; width:240px; font-size:13px; }
    .sidebar{
      grid-row: 2; background:var(--panel); border-right:1px solid var(--border); padding:14px; position:sticky; top:64px; height:calc(100vh - 64px); overflow:auto;
    }
    .side-section{ margin-bottom:16px; }
    .side-title{ color:var(--muted); font-size:12px; margin:8px 10px; }
    .nav{ display:grid; gap:4px; }
    .nav a{
      display:flex; gap:10px; align-items:center; padding:10px 12px; border-radius:10px; color:#0f172a; text-decoration:none;
    }
    .nav a.active, .nav a:hover{ background:var(--brand-weak); color:var(--brand-ink); }
    .chip{ font-size:11px; color:var(--brand-ink); background:var(--brand-weak); padding:2px 8px; border-radius:999px; border:1px solid #d9f2ef; }
    .content{ grid-row:2; padding:18px; overflow:auto; }
    .page{ max-width:1100px; margin:0 auto; display:none; }
    .page.active{ display:block; animation:fade .15s ease-in; }
    @keyframes fade{ from{opacity:.6; transform:translateY(2px);} to{opacity:1; transform:none;} }
    .card{ background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow: var(--shadow); }
    .card .head{ padding:14px 16px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
    .card .body{ padding:16px; }
    .muted{ color:var(--muted); }
    .kpis{ display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; }
    .kpi{ padding:14px; }
    .kpi .label{ font-size:12px; color:var(--muted); }
    .kpi .value{ font-weight:700; font-size:20px; }
    .grid{ display:grid; gap:12px; }
    .two{ grid-template-columns: 1fr 1fr; }
    .table{ width:100%; border-collapse:collapse; }
    .table th, .table td{ padding:10px 8px; border-bottom:1px solid var(--border); text-align:left; font-size:13px; }
    .table th{ color:var(--muted); font-weight:600; }
    label{ display:block; font-size:12px; color:#334155; margin-bottom:6px; }
    input, select, textarea{
      width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:12px; font-size:13px; background:white; outline:none;
    }
    textarea{ resize:vertical; }
    .row{ display:flex; gap:10px; align-items:center; }
    .ok{ color:var(--ok); font-weight:600; }
    .ng{ color:var(--danger); font-weight:600; }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, 'Courier New', monospace; }
    .badge{ font-size:11px; padding:3px 8px; border-radius:999px; background:var(--brand-weak); color:var(--brand-ink); border:1px solid #d9f2ef; }
    .note{ background:#fff7ed; border:1px solid #fed7aa; color:#9a3412; padding:10px; border-radius:10px; font-size:12px; }
  </style>
</head>
<body>
  <div class="layout">
    <div class="topbar">
      <div class="brand">
        <div class="logo"></div>
        <div>経理実務シミュレーター</div>
        <span class="chip">beta</span>
      </div>
      <div class="top-actions">
        <div class="search">
          <svg width="16" height="16" viewBox="0 0 20 20" fill="none"><circle cx="9" cy="9" r="7" stroke="#64748b" stroke-width="1.5"/><path d="M14 14l4 4" stroke="#64748b" stroke-width="1.5" stroke-linecap="round"/></svg>
          <input placeholder="取引先・勘定科目・伝票番号で検索"/>
        </div>
        <button class="btn">ヘルプ</button>
        <button class="btn primary" onclick="alert('この版はデモです。')">新規伝票</button>
      </div>
    </div>

    <aside class="sidebar">
      <div class="side-section">
        <div class="side-title">メイン</div>
        <div class="nav">
          <a href="#dash" data-page="dash" class="active">🏠 ダッシュボード</a>
          <a href="#sales" data-page="sales">🧾 請求・売上</a>
          <a href="#receipt" data-page="receipt">💰 入金消込</a>
          <a href="#expense" data-page="expense">🧾 経費精算</a>
          <a href="#journal" data-page="journal">📒 振替伝票</a>
          <a href="#close" data-page="close">📊 月次決算</a>
          <a href="#report" data-page="report">📈 学習レポート</a>
        </div>
      </div>
      <div class="side-section">
        <div class="side-title">クイック</div>
        <div class="nav">
          <a href="#help" data-page="help">❓ ヘルプ／使い方</a>
        </div>
      </div>
    </aside>

    <main class="content">
      <!-- Dashboard -->
      <section id="dash" class="page active">
        <div class="grid kpis">
          <div class="card kpi"><div class="label">未処理伝票</div><div class="value">3</div></div>
          <div class="card kpi"><div class="label">消込待ち</div><div class="value">1</div></div>
          <div class="card kpi"><div class="label">月次締め進捗</div><div class="value">40%</div></div>
          <div class="card kpi"><div class="label">総合スコア</div><div class="value mono" id="score_total">0%</div></div>
        </div>
        <div class="grid two" style="margin-top:12px;">
          <div class="card">
            <div class="head"><div>最近の取引</div><span class="badge">デモ</span></div>
            <div class="body">
              <table class="table">
                <thead><tr><th>日付</th><th>内容</th><th>金額</th><th>状態</th></tr></thead>
                <tbody>
                  <tr><td>4/30</td><td>取引先A 請求書</td><td class="mono">110,000</td><td><span class="badge">計上済</span></td></tr>
                  <tr><td>5/31</td><td>取引先A 入金</td><td class="mono">110,000</td><td><span class="badge">消込済</span></td></tr>
                  <tr><td>4/30</td><td>通信費（4月分）</td><td class="mono">22,000</td><td><span class="badge">未払計上</span></td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="card">
            <div class="head"><div>ショートカット</div></div>
            <div class="body">
              <div class="row" style="gap:8px; flex-wrap:wrap;">
                <button class="btn" onclick="nav('sales')">売上計上</button>
                <button class="btn" onclick="nav('receipt')">入金消込</button>
                <button class="btn" onclick="nav('expense')">経費精算</button>
                <button class="btn" onclick="nav('close')">月次締め</button>
              </div>
              <div class="note" style="margin-top:12px;">※ このデモは「freee風」のUIを参考にしたオリジナルデザインです。</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Sales / Invoice -->
      <section id="sales" class="page">
        <div class="card">
          <div class="head"><div>請求・売上の計上</div><button class="btn primary" onclick="gradeInvoice()">採点</button></div>
          <div class="body grid two">
            <div>
              <label>借方科目</label>
              <select id="inv_d_k"><option>売掛金</option><option>当座預金</option><option>現金</option></select>
              <label style="margin-top:8px;">借方金額</label>
              <input id="inv_d_a" placeholder="110000">
            </div>
            <div>
              <div class="grid two">
                <div>
                  <label>貸方科目（1）</label>
                  <select id="inv_c1_k"><option>売上高</option><option>仮受消費税</option><option>前受金</option></select>
                </div>
                <div>
                  <label>貸方金額（1）</label><input id="inv_c1_a" placeholder="100000">
                </div>
                <div>
                  <label>貸方科目（2 任意）</label>
                  <select id="inv_c2_k"><option>（なし）</option><option>仮受消費税</option><option>売上高</option></select>
                </div>
                <div>
                  <label>貸方金額（2 任意）</label><input id="inv_c2_a" placeholder="10000">
                </div>
              </div>
            </div>
            <div class="row" style="grid-column: 1 / -1; justify-content: space-between;">
              <div id="inv_msg" class="muted"></div>
              <div class="row muted"><div>伝票番号</div><div class="mono">SL-2404-001</div></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Receipt -->
      <section id="receipt" class="page">
        <div class="card">
          <div class="head"><div>入金の消込</div><button class="btn primary" onclick="gradeReceipt()">採点</button></div>
          <div class="body grid two">
            <div>
              <label>借方科目</label>
              <select id="rcv_d_k"><option>当座預金</option><option>普通預金</option><option>現金</option></select>
              <label style="margin-top:8px;">借方金額</label>
              <input id="rcv_d_a" placeholder="110000">
            </div>
            <div>
              <label>貸方科目</label>
              <select id="rcv_c_k"><option>売掛金</option><option>売上高</option><option>前受金</option></select>
              <label style="margin-top:8px;">貸方金額</label>
              <input id="rcv_c_a" placeholder="110000">
            </div>
            <div class="row" style="grid-column: 1 / -1; justify-content: space-between;">
              <div id="rcv_msg" class="muted"></div>
              <div class="row muted"><div>入金日</div><div class="mono">2025-05-31</div></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Expense -->
      <section id="expense" class="page">
        <div class="card">
          <div class="head"><div>経費精算（未払計上）</div><button class="btn primary" onclick="gradeExpense()">採点</button></div>
          <div class="body grid two">
            <div>
              <label>借方科目</label>
              <select id="exp_d_k"><option>通信費</option><option>水道光熱費</option><option>旅費交通費</option></select>
              <label style="margin-top:8px;">借方金額</label>
              <input id="exp_d_a" placeholder="22000">
            </div>
            <div>
              <label>貸方科目</label>
              <select id="exp_c_k"><option>未払費用</option><option>未払金</option><option>買掛金</option></select>
              <label style="margin-top:8px;">貸方金額</label>
              <input id="exp_c_a" placeholder="22000">
            </div>
            <div class="row" style="grid-column: 1 / -1; justify-content: space-between;">
              <div id="exp_msg" class="muted"></div>
              <div class="row muted"><div>対象月</div><div class="mono">2025-04</div></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Journal -->
      <section id="journal" class="page">
        <div class="card">
          <div class="head"><div>振替伝票作成</div><button class="btn">テンプレから作成</button></div>
          <div class="body">
            <table class="table">
              <thead><tr><th>借方科目</th><th>金額</th><th>貸方科目</th><th>金額</th><th>摘要</th></tr></thead>
              <tbody>
                <tr>
                  <td><input placeholder="通信費"></td>
                  <td><input placeholder="22000"></td>
                  <td><input placeholder="未払費用"></td>
                  <td><input placeholder="22000"></td>
                  <td><input placeholder="4月分通信費の未払計上"></td>
                </tr>
              </tbody>
            </table>
            <div class="row" style="margin-top:10px; justify-content:flex-end;">
              <button class="btn primary" onclick="alert('デモでは保存しません')">保存</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Monthly Close -->
      <section id="close" class="page">
        <div class="card">
          <div class="head"><div>月次決算（4月）</div><button class="btn primary" onclick="gradeMonthly()">試算表チェック</button></div>
          <div class="body grid">
            <div class="two">
              <div>
                <label>仕訳（1行ずつ）</label>
                <textarea id="monthly_journal" rows="6" placeholder="（1）売掛金 110,000 / 売上高 100,000, 仮受消費税 10,000
（2）通信費 22,000 / 未払費用 22,000"></textarea>
                <div class="note" style="margin-top:10px;">※ 本実装では税区分や承認フローまで検証予定</div>
              </div>
              <div>
                <div class="card">
                  <div class="head"><div>チェック結果</div></div>
                  <div class="body" id="monthly_result">未チェック</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Report -->
      <section id="report" class="page">
        <div class="card">
          <div class="head"><div>学習レポート</div></div>
          <div class="body grid two">
            <div>
              <table class="table">
                <thead><tr><th>カテゴリ</th><th>正答数</th></tr></thead>
                <tbody>
                  <tr><td>日常業務</td><td class="mono" id="score_daily">0/3</td></tr>
                  <tr><td>月次決算</td><td class="mono" id="score_monthly">0/2</td></tr>
                </tbody>
              </table>
            </div>
            <div>
              <div class="kpi card">
                <div class="label">総合スコア</div>
                <div class="value mono" id="score_total2">0%</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Help -->
      <section id="help" class="page">
        <div class="card">
          <div class="head"><div>ヘルプ / 使い方</div></div>
          <div class="body">
            <p class="muted">サイドバーの項目を順に進めれば、「freee風」のワークフローで練習できます。実装はオリジナルであり、特定サービスの画面を再現したものではありません。</p>
          </div>
        </div>
      </section>

    </main>
  </div>

<script>
  // Navigation
  document.querySelectorAll('.nav a').forEach(a=>{
    a.addEventListener('click', (e)=>{
      e.preventDefault();
      const id = a.dataset.page;
      nav(id);
    });
  });
  function nav(id){
    document.querySelectorAll('.nav a').forEach(x=>x.classList.remove('active'));
    document.querySelector('.nav a[data-page="'+id+'"]').classList.add('active');
    document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    localStorage.setItem('active_page', id);
  }
  (function(){ const s = localStorage.getItem('active_page'); if(s) nav(s); })();

  // Grading logic
  function set(el,msg,ok){ el.innerHTML = ok ? `<span class='ok'>✔ ${msg}</span>` : `<span class='ng'>✖ ${msg}</span>`; }
  function gradeInvoice(){
    const ok = document.getElementById('inv_d_k').value==='売掛金' &&
      Number(document.getElementById('inv_d_a').value)===110000 &&
      ((document.getElementById('inv_c1_k').value==='売上高' && Number(document.getElementById('inv_c1_a').value)===100000 &&
        document.getElementById('inv_c2_k').value==='仮受消費税' && Number(document.getElementById('inv_c2_a').value||0)===10000) ||
       (document.getElementById('inv_c1_k').value==='売上高' && Number(document.getElementById('inv_c1_a').value)===110000 && document.getElementById('inv_c2_k').value==='（なし）'));
    const el = document.getElementById('inv_msg');
    set(el, ok ? '正解：売掛金 110,000 / 売上高 100,000, 仮受消費税 10,000（内税も可）' : '不正解：基本は売掛金 110,000 / 売上高 100,000, 仮受消費税 10,000（内税でも可）', ok);
    scoreUpdate('daily', ok);
  }
  function gradeReceipt(){
    const ok = ['当座預金','普通預金','現金'].includes(document.getElementById('rcv_d_k').value) &&
      Number(document.getElementById('rcv_d_a').value)===110000 &&
      document.getElementById('rcv_c_k').value==='売掛金' &&
      Number(document.getElementById('rcv_c_a').value)===110000;
    const el = document.getElementById('rcv_msg');
    set(el, ok ? '正解：当座/普通/現金 110,000 / 売掛金 110,000' : '不正解：入金は当座/普通/現金、消込は売掛金。金額110,000', ok);
    scoreUpdate('daily', ok);
  }
  function gradeExpense(){
    const ok = document.getElementById('exp_d_k').value==='通信費' &&
      document.getElementById('exp_c_k').value==='未払費用' &&
      Number(document.getElementById('exp_d_a').value)===22000 &&
      Number(document.getElementById('exp_c_a').value)===22000;
    const el = document.getElementById('exp_msg');
    set(el, ok ? '正解：通信費 22,000 / 未払費用 22,000' : '不正解：4月分は未払計上（通信費 / 未払費用 22,000）', ok);
    scoreUpdate('daily', ok);
  }
  function gradeMonthly(){
    const text = document.getElementById('monthly_journal').value;
    const ok1 = /売掛金/.test(text) && /110,?000/.test(text) && /売上高/.test(text);
    const ok2 = /通信費/.test(text) && /22,?000/.test(text) && /(未払費用|未払金)/.test(text);
    const box = document.getElementById('monthly_result');
    box.innerHTML = `<div>${ok1?'✔':'✖'} 売掛計上（売掛金 / 売上高 + 仮受消費税）</div>
                     <div>${ok2?'✔':'✖'} 未払計上（通信費 / 未払費用 22,000）</div>`;
    scoreUpdate('monthly', ok1 && ok2);
  }

  // Simple score tracker
  function scoreUpdate(section, ok){
    const s = JSON.parse(localStorage.getItem('score')||'{"daily":0,"monthly":0,"total":0}');
    if(section==='daily'){ s.daily = Math.min(3, s.daily + (ok?1:0)); }
    if(section==='monthly'){ s.monthly = Math.min(2, s.monthly + (ok?1:0)); }
    const total = Math.round(((s.daily/3)*0.6 + (s.monthly/2)*0.4) * 100);
    s.total = total;
    localStorage.setItem('score', JSON.stringify(s));
    // reflect UI
    document.getElementById('score_total').textContent = total+'%';
    document.getElementById('score_daily').textContent = s.daily+'/3';
    document.getElementById('score_monthly').textContent = s.monthly+'/2';
    document.getElementById('score_total2').textContent = total+'%';
  }
  (function(){ // restore score
    const s = JSON.parse(localStorage.getItem('score')||'{"daily":0,"monthly":0,"total":0}');
    document.getElementById('score_total').textContent = s.total+'%';
    document.getElementById('score_daily').textContent = s.daily+'/3';
    document.getElementById('score_monthly').textContent = s.monthly+'/2';
    document.getElementById('score_total2').textContent = s.total+'%';
  })();
</script>
</body>
</html>
